<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">12.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemlir.html">mlir</a></li><li class="navelem"><a class="el" href="classmlir_1_1FoldingHook.html">FoldingHook</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classmlir_1_1FoldingHook-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This template defines the foldHook as used by <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>.  
 <a href="classmlir_1_1FoldingHook.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="OpDefinition_8h_source.html">mlir/IR/OpDefinition.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classmlir_1_1FoldingHook__inherit__graph.png" border="0" usemap="#mlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="mlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01_4_inherit__map" id="mlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01_4_inherit__map">
<area shape="rect" id="node2" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l FuncOp, llvm::is_one\l_of\&lt; OpTrait::OneResult\l\&lt; FuncOp \&gt;, OpTrait::ZeroOperands\l\&lt; FuncOp \&gt;... \&gt;::value \&gt;" alt="" coords="797,247,1031,332"/>
<area shape="rect" id="node5" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l AffineDmaStartOp, llvm\l::is_one_of\&lt; OpTrait::OneResult\l\&lt; AffineDmaStartOp \&gt;, OpTrait\l::VariadicOperands\&lt; AffineDmaStartOp\l \&gt;... \&gt;::value \&gt;" alt="" coords="788,33,1040,133"/>
<area shape="rect" id="node8" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l AffineWriteOpInterface,\l llvm::is_one_of\&lt; OpTrait\l::OneResult\&lt; AffineWriteOpInterface\l \&gt;, Traits\&lt; AffineWriteOpInterface\l \&gt;... \&gt;::value \&gt;" alt="" coords="795,139,1033,239"/>
<area shape="rect" id="node13" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l ConcreteType, llvm\l::is_one_of\&lt; OpTrait\l::OneResult\&lt; ConcreteType\l \&gt;, Traits\&lt; ConcreteType\l \&gt;... \&gt;::value \&gt;" alt="" coords="530,531,717,631"/>
<area shape="rect" id="node32" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l DmaWaitOp, llvm::is\l_one_of\&lt; OpTrait::OneResult\l\&lt; DmaWaitOp \&gt;, OpTrait::Variadic\lOperands\&lt; DmaWaitOp \&gt;... \&gt;::value \&gt;" alt="" coords="789,1253,1039,1339"/>
<area shape="rect" id="node33" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l DmaStartOp, llvm::is\l_one_of\&lt; OpTrait::OneResult\l\&lt; DmaStartOp \&gt;, OpTrait::VariadicOperands\l\&lt; DmaStartOp \&gt;... \&gt;::value \&gt;" alt="" coords="483,1156,764,1241"/>
<area shape="rect" id="node34" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l ModuleOp, llvm::is\l_one_of\&lt; OpTrait::OneResult\l\&lt; ModuleOp \&gt;, OpTrait::ZeroOperands\l\&lt; ModuleOp \&gt;... \&gt;::value \&gt;" alt="" coords="500,900,747,985"/>
<area shape="rect" id="node35" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l ModuleTerminatorOp,\l llvm::is_one_of\&lt; OpTrait\l::OneResult\&lt; ModuleTerminatorOp\l \&gt;, OpTrait::ZeroOperands\&lt; ModuleTerminator\lOp \&gt;... \&gt;::value \&gt;" alt="" coords="1064,1065,1355,1165"/>
<area shape="rect" id="node36" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l AffineReadOpInterface,\l llvm::is_one_of\&lt; OpTrait\l::OneResult\&lt; AffineReadOpInterface\l \&gt;, Traits\&lt; AffineReadOpInterface\l \&gt;... \&gt;::value \&gt;" alt="" coords="1091,673,1328,773"/>
<area shape="rect" id="node37" href="classmlir_1_1FoldingHook.html" title="mlir::FoldingHook\&lt;\l AffineDmaWaitOp, llvm\l::is_one_of\&lt; OpTrait::\lOneResult\&lt; AffineDmaWaitOp\l \&gt;, OpTrait::VariadicOperands\l\&lt; AffineDmaWaitOp \&gt;... \&gt;::value \&gt;" alt="" coords="1096,807,1323,907"/>
<area shape="rect" id="node3" href="classmlir_1_1Op.html" title="mlir::Op\&lt; FuncOp, OpTrait\l::ZeroOperands, OpTrait\l::ZeroResult, OpTrait::OneRegion,\l OpTrait::IsIsolatedFromAbove,\l OpTrait::FunctionLike, OpTrait\l::AutomaticAllocationScope, OpTrait\l::AffineScope, CallableOpInterface\l::Trait, SymbolOpInterface::Trait \&gt;" alt="" coords="1766,345,2001,474"/>
<area shape="rect" id="node4" href="classmlir_1_1FuncOp.html" title="FuncOp represents a function, or an operation containing one region that forms a CFG(Control Flow Gra..." alt="" coords="2161,396,2259,423"/>
<area shape="rect" id="node6" href="classmlir_1_1Op.html" title="mlir::Op\&lt; AffineDmaStart\lOp, OpTrait::VariadicOperands,\l OpTrait::ZeroResult \&gt;" alt="" coords="1781,136,1986,192"/>
<area shape="rect" id="node7" href="classmlir_1_1AffineDmaStartOp.html" title="AffineDmaStartOp starts a non&#45;blocking DMA operation that transfers data from a source memref to a de..." alt="" coords="2131,151,2289,177"/>
<area shape="rect" id="node9" href="classmlir_1_1Op.html" title="mlir::Op\&lt; AffineWriteOpInterface \&gt;" alt="" coords="1771,293,1996,320"/>
<area shape="rect" id="node10" href="classmlir_1_1detail_1_1Interface.html" title="mlir::detail::Interface\l\&lt; AffineWriteOpInterface,\l Operation *, detail::AffineWrite\lOpInterfaceInterfaceTraits, Op\l\&lt; AffineWriteOpInterface \&gt;, OpTrait\l::TraitBase \&gt;" alt="" coords="2329,282,2560,382"/>
<area shape="rect" id="node11" href="classmlir_1_1OpInterface.html" title="mlir::OpInterface\&lt;\l AffineWriteOpInterface,\l detail::AffineWriteOpInterface\lInterfaceTraits \&gt;" alt="" coords="2971,395,3169,466"/>
<area shape="rect" id="node12" href="classmlir_1_1AffineWriteOpInterface.html" title="mlir::AffineWriteOpInterface" alt="" coords="3219,417,3403,444"/>
<area shape="rect" id="node14" href="classmlir_1_1Op.html" title="This provides public APIs that all operations should have. " alt="" coords="1126,561,1293,602"/>
<area shape="rect" id="node27" href="classmlir_1_1Op.html" title="mlir::Op\&lt; ConcreteType \&gt;" alt="" coords="1796,499,1971,525"/>
<area shape="rect" id="node15" href="classmlir_1_1Op.html" title="mlir::Op\&lt; AffineReadOpInterface \&gt;" alt="" coords="1771,568,1996,595"/>
<area shape="rect" id="node19" href="classmlir_1_1Op.html" title="mlir::Op\&lt; ModuleTerminator\lOp, OpTrait::ZeroOperands,\l OpTrait::ZeroResult, OpTrait\l::HasParent\&lt; ModuleOp \&gt;::Impl,\l OpTrait::IsTerminator \&gt;" alt="" coords="1777,937,1989,1023"/>
<area shape="rect" id="node21" href="classmlir_1_1Op.html" title="mlir::Op\&lt; DmaWaitOp,\l OpTrait::VariadicOperands,\l OpTrait::ZeroResult \&gt;" alt="" coords="1791,1211,1975,1267"/>
<area shape="rect" id="node23" href="classmlir_1_1Op.html" title="mlir::Op\&lt; AffineDmaWaitOp,\l OpTrait::VariadicOperands,\l OpTrait::ZeroResult \&gt;" alt="" coords="1788,661,1979,717"/>
<area shape="rect" id="node25" href="classmlir_1_1Op.html" title="mlir::Op\&lt; ModuleOp,\l OpTrait::ZeroOperands,\l OpTrait::ZeroResult,\l OpTrait::IsIsolatedFromAbove,\l OpTrait::AffineScope, OpTrait\l::SymbolTable, OpTrait::SingleBlockImplicit\lTerminator\&lt; ModuleTerminatorOp \&gt;::Impl,\l SymbolOpInterface::Trait, OpTrait::NoRegionArguments \&gt;" alt="" coords="1701,777,2065,906"/>
<area shape="rect" id="node30" href="classmlir_1_1Op.html" title="mlir::Op\&lt; DmaStartOp,\l OpTrait::VariadicOperands,\l OpTrait::ZeroResult \&gt;" alt="" coords="1791,1092,1975,1148"/>
<area shape="rect" id="node16" href="classmlir_1_1detail_1_1Interface.html" title="mlir::detail::Interface\l\&lt; AffineReadOpInterface,\l Operation *, detail::AffineRead\lOpInterfaceInterfaceTraits, Op\l\&lt; AffineReadOpInterface \&gt;, OpTrait\l::TraitBase \&gt;" alt="" coords="2329,530,2560,630"/>
<area shape="rect" id="node17" href="classmlir_1_1OpInterface.html" title="mlir::OpInterface\&lt;\l AffineReadOpInterface,\l detail::AffineReadOpInterface\lInterfaceTraits \&gt;" alt="" coords="2971,502,3169,573"/>
<area shape="rect" id="node18" href="classmlir_1_1AffineReadOpInterface.html" title="mlir::AffineReadOpInterface" alt="" coords="3219,524,3403,551"/>
<area shape="rect" id="node20" href="classmlir_1_1ModuleTerminatorOp.html" title="The ModuleTerminatorOp is a special terminator operation for the body of a ModuleOp, it has no semantic meaning beyond keeping the body of a ModuleOp well&#45;formed. " alt="" coords="2124,967,2296,993"/>
<area shape="rect" id="node22" href="classmlir_1_1DmaWaitOp.html" title="mlir::DmaWaitOp" alt="" coords="2149,1225,2271,1252"/>
<area shape="rect" id="node24" href="classmlir_1_1AffineDmaWaitOp.html" title="AffineDmaWaitOp blocks until the completion of a DMA operation associated with the tag element &#39;tag[i..." alt="" coords="2131,676,2289,703"/>
<area shape="rect" id="node26" href="classmlir_1_1ModuleOp.html" title="ModuleOp represents a module, or an operation containing one region with a single block containing op..." alt="" coords="2155,828,2265,855"/>
<area shape="rect" id="node28" href="classmlir_1_1detail_1_1Interface.html" title="mlir::detail::Interface\l\&lt; ConcreteType, Operation\l *, Traits, Op\&lt; ConcreteType\l \&gt;, OpTrait::TraitBase \&gt;" alt="" coords="2115,473,2305,543"/>
<area shape="rect" id="node29" href="classmlir_1_1OpInterface.html" title="This class represents the base of an operation interface. " alt="" coords="2584,487,2745,529"/>
<area shape="rect" id="node31" href="classmlir_1_1DmaStartOp.html" title="mlir::DmaStartOp" alt="" coords="2148,1107,2272,1133"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af938ced93f6a45934750ed438228b3be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1FoldingHook.html#af938ced93f6a45934750ed438228b3be">fold</a> (<a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt; operands, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;results)</td></tr>
<tr class="memdesc:af938ced93f6a45934750ed438228b3be"><td class="mdescLeft">&#160;</td><td class="mdescRight">This hook implements a generalized folder for this operation.  <a href="#af938ced93f6a45934750ed438228b3be">More...</a><br /></td></tr>
<tr class="separator:af938ced93f6a45934750ed438228b3be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aad50a0fc7560458b00e8a1479aa47bea"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1FoldingHook.html#aad50a0fc7560458b00e8a1479aa47bea">foldHook</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt; operands, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;results)</td></tr>
<tr class="memdesc:aad50a0fc7560458b00e8a1479aa47bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an implementation detail of the constant folder hook for <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>.  <a href="#aad50a0fc7560458b00e8a1479aa47bea">More...</a><br /></td></tr>
<tr class="separator:aad50a0fc7560458b00e8a1479aa47bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename ConcreteType, bool isSingleResult, typename = void&gt;<br />
class mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename &gt;</h3>

<p>This template defines the foldHook as used by <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>. </p>
<p>The default implementation uses a general fold method that can be defined on custom ops which can return multiple results. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00274">274</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af938ced93f6a45934750ed438228b3be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af938ced93f6a45934750ed438228b3be">&#9670;&nbsp;</a></span>fold()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConcreteType, bool isSingleResult, typename  = void&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> <a class="el" href="classmlir_1_1FoldingHook.html">mlir::FoldingHook</a>&lt; ConcreteType, isSingleResult, typename &gt;::fold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt;&#160;</td>
          <td class="paramname"><em>operands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This hook implements a generalized folder for this operation. </p>
<p>Operations can implement this to provide simplifications rules that are applied by the Builder::createOrFold API and the canonicalization pass.</p>
<p>This is an intentionally limited interface - implementations of this hook can only perform the following changes to the operation:</p>
<ol type="1">
<li>They can leave the operation alone and without changing the IR, and return failure.</li>
<li>They can mutate the operation in place, without changing anything else in the IR. In this case, return success.</li>
<li>They can return a list of existing values that can be used instead of the operation. In this case, fill in the results list and return success. The caller will remove the operation and use those results instead.</li>
</ol>
<p>This allows expression of some simple in-place canonicalizations (e.g. "x+0 -&gt; x", "min(x,y,x,z) -&gt; min(x,y,z)", "x+y-x -&gt; y", etc), as well as generalized constant folding.</p>
<p>If not overridden, this fallback implementation always fails to fold. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00305">305</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>

</div>
</div>
<a id="aad50a0fc7560458b00e8a1479aa47bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad50a0fc7560458b00e8a1479aa47bea">&#9670;&nbsp;</a></span>foldHook()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConcreteType, bool isSingleResult, typename  = void&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> <a class="el" href="classmlir_1_1FoldingHook.html">mlir::FoldingHook</a>&lt; ConcreteType, isSingleResult, typename &gt;::foldHook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt;&#160;</td>
          <td class="paramname"><em>operands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an implementation detail of the constant folder hook for <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00278">278</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/mlir/IR/<a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 8 2020 16:27:19 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
