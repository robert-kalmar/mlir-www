<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">12.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemlir.html">mlir</a></li><li class="navelem"><a class="el" href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_189bf6924ecff7e8cff06519bed3e164.html">FoldingHook&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt;</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_045c2b9d6238d60dd5dc33369dc59436.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This template specialization defines the foldHook as used by <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a> for single-result operations.  
 <a href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_189bf6924ecff7e8cff06519bed3e164.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="OpDefinition_8h_source.html">mlir/IR/OpDefinition.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a06841b251ce57a8ace000af12fd3a7b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_189bf6924ecff7e8cff06519bed3e164.html#a06841b251ce57a8ace000af12fd3a7b8">operator Value</a> ()</td></tr>
<tr class="memdesc:a06841b251ce57a8ace000af12fd3a7b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the operation returns a single value, then the <a class="el" href="classmlir_1_1Op.html" title="This provides public APIs that all operations should have. ">Op</a> can be implicitly converted to an <a class="el" href="classmlir_1_1Value.html" title="This class represents an instance of an SSA value in the MLIR system, representing a computable value...">Value</a>.  <a href="#a06841b251ce57a8ace000af12fd3a7b8">More...</a><br /></td></tr>
<tr class="separator:a06841b251ce57a8ace000af12fd3a7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d06e3e80bc7746176e4407b78a58bea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_189bf6924ecff7e8cff06519bed3e164.html#a8d06e3e80bc7746176e4407b78a58bea">fold</a> (<a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt; operands)</td></tr>
<tr class="memdesc:a8d06e3e80bc7746176e4407b78a58bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">This hook implements a generalized folder for this operation.  <a href="#a8d06e3e80bc7746176e4407b78a58bea">More...</a><br /></td></tr>
<tr class="separator:a8d06e3e80bc7746176e4407b78a58bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae37a17100e6c18b9c2219b3a43ce024d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmlir_1_1FoldingHook_3_01ConcreteType_00_01isSingleResult_00_01typename_01std_1_1enable__if_189bf6924ecff7e8cff06519bed3e164.html#ae37a17100e6c18b9c2219b3a43ce024d">foldHook</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *op, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt; operands, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;results)</td></tr>
<tr class="memdesc:ae37a17100e6c18b9c2219b3a43ce024d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an implementation detail of the constant folder hook for <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>.  <a href="#ae37a17100e6c18b9c2219b3a43ce024d">More...</a><br /></td></tr>
<tr class="separator:ae37a17100e6c18b9c2219b3a43ce024d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename ConcreteType, bool isSingleResult&gt;<br />
class mlir::FoldingHook&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt;</h3>

<p>This template specialization defines the foldHook as used by <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a> for single-result operations. </p>
<p>This gives the hook a nicer signature that is easier to implement. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00315">315</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8d06e3e80bc7746176e4407b78a58bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d06e3e80bc7746176e4407b78a58bea">&#9670;&nbsp;</a></span>fold()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConcreteType , bool isSingleResult&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> <a class="el" href="classmlir_1_1FoldingHook.html">mlir::FoldingHook</a>&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt;::fold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt;&#160;</td>
          <td class="paramname"><em>operands</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This hook implements a generalized folder for this operation. </p>
<p>Operations can implement this to provide simplifications rules that are applied by the Builder::createOrFold API and the canonicalization pass.</p>
<p>This is an intentionally limited interface - implementations of this hook can only perform the following changes to the operation:</p>
<ol type="1">
<li>They can leave the operation alone and without changing the IR, and return nullptr.</li>
<li>They can mutate the operation in place, without changing anything else in the IR. In this case, return the operation itself.</li>
<li>They can return an existing SSA value that can be used instead of the operation. In this case, return that value. The caller will remove the operation and use that result instead.</li>
</ol>
<p>This allows expression of some simple in-place canonicalizations (e.g. "x+0 -&gt; x", "min(x,y,x,z) -&gt; min(x,y,z)", "x+y-x -&gt; y", etc), as well as generalized constant folding.</p>
<p>If not overridden, this fallback implementation always fails to fold. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00360">360</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>

<p class="reference">References <a class="el" href="Operation_8cpp_source.html#l00704">mlir::OpTrait::impl::verifyAtLeastNOperands()</a>, <a class="el" href="Operation_8cpp_source.html#l00775">mlir::OpTrait::impl::verifyAtLeastNRegions()</a>, <a class="el" href="Operation_8cpp_source.html#l00801">mlir::OpTrait::impl::verifyAtLeastNResults()</a>, <a class="el" href="Operation_8cpp_source.html#l00942">mlir::OpTrait::impl::verifyAtLeastNSuccessors()</a>, <a class="el" href="Operation_8cpp_source.html#l00900">mlir::OpTrait::impl::verifyIsTerminator()</a>, <a class="el" href="Operation_8cpp_source.html#l00695">mlir::OpTrait::impl::verifyNOperands()</a>, <a class="el" href="Operation_8cpp_source.html#l01020">mlir::OpTrait::impl::verifyNoRegionArguments()</a>, <a class="el" href="Operation_8cpp_source.html#l00768">mlir::OpTrait::impl::verifyNRegions()</a>, <a class="el" href="Operation_8cpp_source.html#l00794">mlir::OpTrait::impl::verifyNResults()</a>, <a class="el" href="Operation_8cpp_source.html#l00933">mlir::OpTrait::impl::verifyNSuccessors()</a>, <a class="el" href="Operation_8cpp_source.html#l00689">mlir::OpTrait::impl::verifyOneOperand()</a>, <a class="el" href="Operation_8cpp_source.html#l00762">mlir::OpTrait::impl::verifyOneRegion()</a>, <a class="el" href="Operation_8cpp_source.html#l00788">mlir::OpTrait::impl::verifyOneResult()</a>, <a class="el" href="Operation_8cpp_source.html#l00926">mlir::OpTrait::impl::verifyOneSuccessor()</a>, <a class="el" href="Operation_8cpp_source.html#l00734">mlir::OpTrait::impl::verifyOperandsAreFloatLike()</a>, <a class="el" href="Operation_8cpp_source.html#l00725">mlir::OpTrait::impl::verifyOperandsAreSignlessIntegerLike()</a>, <a class="el" href="Operation_8cpp_source.html#l01010">mlir::OpTrait::impl::verifyOperandSizeAttr()</a>, <a class="el" href="Operation_8cpp_source.html#l00952">mlir::OpTrait::impl::verifyResultsAreBoolLike()</a>, <a class="el" href="Operation_8cpp_source.html#l00963">mlir::OpTrait::impl::verifyResultsAreFloatLike()</a>, <a class="el" href="Operation_8cpp_source.html#l00972">mlir::OpTrait::impl::verifyResultsAreSignlessIntegerLike()</a>, <a class="el" href="Operation_8cpp_source.html#l01015">mlir::OpTrait::impl::verifyResultSizeAttr()</a>, <a class="el" href="Operation_8cpp_source.html#l00854">mlir::OpTrait::impl::verifySameOperandsAndResultElementType()</a>, <a class="el" href="Operation_8cpp_source.html#l00821">mlir::OpTrait::impl::verifySameOperandsAndResultShape()</a>, <a class="el" href="Operation_8cpp_source.html#l00878">mlir::OpTrait::impl::verifySameOperandsAndResultType()</a>, <a class="el" href="Operation_8cpp_source.html#l00840">mlir::OpTrait::impl::verifySameOperandsElementType()</a>, <a class="el" href="Operation_8cpp_source.html#l00809">mlir::OpTrait::impl::verifySameOperandsShape()</a>, <a class="el" href="Operation_8cpp_source.html#l00743">mlir::OpTrait::impl::verifySameTypeOperands()</a>, <a class="el" href="Operation_8cpp_source.html#l00683">mlir::OpTrait::impl::verifyZeroOperands()</a>, <a class="el" href="Operation_8cpp_source.html#l00756">mlir::OpTrait::impl::verifyZeroRegion()</a>, <a class="el" href="Operation_8cpp_source.html#l00782">mlir::OpTrait::impl::verifyZeroResult()</a>, and <a class="el" href="Operation_8cpp_source.html#l00918">mlir::OpTrait::impl::verifyZeroSuccessor()</a>.</p>

</div>
</div>
<a id="ae37a17100e6c18b9c2219b3a43ce024d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae37a17100e6c18b9c2219b3a43ce024d">&#9670;&nbsp;</a></span>foldHook()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConcreteType , bool isSingleResult&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> <a class="el" href="classmlir_1_1FoldingHook.html">mlir::FoldingHook</a>&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt;::foldHook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classmlir_1_1Attribute.html">Attribute</a> &gt;&#160;</td>
          <td class="paramname"><em>operands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1OpFoldResult.html">OpFoldResult</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an implementation detail of the constant folder hook for <a class="el" href="classmlir_1_1AbstractOperation.html" title="This is a &quot;type erased&quot; representation of a registered operation. ">AbstractOperation</a>. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00326">326</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>

<p class="reference">References <a class="el" href="LogicalResult_8h_source.html#l00033">mlir::failure()</a>, <a class="el" href="Operation_8h_source.html#l00275">mlir::Operation::getResult()</a>, and <a class="el" href="LogicalResult_8h_source.html#l00026">mlir::success()</a>.</p>

</div>
</div>
<a id="a06841b251ce57a8ace000af12fd3a7b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06841b251ce57a8ace000af12fd3a7b8">&#9670;&nbsp;</a></span>operator Value()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ConcreteType , bool isSingleResult&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmlir_1_1FoldingHook.html">mlir::FoldingHook</a>&lt; ConcreteType, isSingleResult, typename std::enable_if&lt; isSingleResult &gt;::type &gt;::operator <a class="el" href="classmlir_1_1Value.html">Value</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the operation returns a single value, then the <a class="el" href="classmlir_1_1Op.html" title="This provides public APIs that all operations should have. ">Op</a> can be implicitly converted to an <a class="el" href="classmlir_1_1Value.html" title="This class represents an instance of an SSA value in the MLIR system, representing a computable value...">Value</a>. </p>
<p>This yields the value of the only result. </p>

<p class="definition">Definition at line <a class="el" href="OpDefinition_8h_source.html#l00320">320</a> of file <a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/mlir/IR/<a class="el" href="OpDefinition_8h_source.html">OpDefinition.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Aug 8 2020 16:27:19 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
